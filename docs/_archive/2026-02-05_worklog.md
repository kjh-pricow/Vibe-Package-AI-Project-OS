# 2026-02-05_worklog.md
# Vibe Package – AI Project OS
# Worklog (Source of Truth)

---

## 1. Worklog Purpose

이 문서는 **Vibe Package – AI Project OS**의
- 설계 변화
- 운영 검증 결과
- 핵심 의사결정
을 기록하는 **프로젝트 관리용 단일 로그**다.

이 파일은:
- 과거 대화 기록을 대체하며
- 프로젝트의 현재 상태를 명확히 정의하고
- 다음 작업의 출발점을 제공한다.

---

## 2. Project Status (Phase Update)

### Previous Status (2026-02-04)
- Phase: **Definition Phase**
- 상태:
  - OS 철학/구조/역할 정의 완료
  - 실제 실행 가능성은 가정 수준
- 한계:
  - CLI/Runtime은 개념만 존재
  - 운영 시나리오 검증 없음

### Current Status (2026-02-05)
- Phase: **Execution-Validated OS**
- 의미:
  - 단순 정의 프로젝트가 아님
  - **실제 실행 가능한 AI Project OS임이 검증됨**
- 증거:
  - CLI를 통해 Chief AI 실제 호출 성공
  - 설정 파일, 역할 프롬프트, 환경 변수 기반 실행 확인
  - 승인 기반 워크플로우의 현실성 검증

> 결정적으로, 이 프로젝트는  
> “정의된 OS” → “운영 가능한 OS” 단계로 이동했다.

---

## 3. Core Architectural Decisions (New & Confirmed)

### 3.1 File-Based LLM / Agent Configuration (ADR)

**결정**
- LLM 및 Agent 설정은 플랫폼이 아니라 **레포 파일**로 관리한다.

**확정 구조**
vibe/config/
├─ llm.yaml # provider / model / env_key 정의
└─ agents.yaml # agent → llm_profile 매핑


**핵심 원칙**
- Agent는 모델을 모른다.
- llm_profile을 통해 간접 연결한다.
- PM은 사람(사용자)으로 고정하며 PM AI는 제거한다.

**의미**
- 멀티 LLM 혼용 가능
- CLI/엔진으로 자연스럽게 확장 가능
- 플랫폼 의존성 제거

---

### 3.2 Role Definition → OS Contract로 승격

**이전**
- 역할 설명(Purpose/Responsibilities) 중심
- 개념 문서 성격

**현재**
모든 Role에 **운영 계약(OS Contract)** 개념 도입:

- Output Format 고정
- File Touch Rules 명시
- OS Guardrails 추가
- “Conversation ≠ Memory” 원칙 명문화

**적용 대상**
vibe/roles/
├─ chief_ai.md
├─ analyst_ai.md
├─ dev_ai.md
├─ qa_ai.md
└─ librarian_ai.md


**의미**
- 역할 간 책임 경계 명확화
- 자동화/엔진 연결 가능한 구조 확보
- 멀티 LLM 환경에서도 일관된 동작 보장

---

### 3.3 Session Protocol 도입

**신규 파일**
vibe/session_protocol.md


**확정 내용**
- 턴 기반 운영 규칙 명문화
- write / write-plan / approval 단계 분리
- Dev / QA 조건부 호출
- Turn Definition of Done(DoD) 정의

**관리적 결론**
> “AI가 무엇을 할 수 있는가”보다  
> **“언제 무엇을 해도 되는가”가 더 중요하다**

---

## 4. Approval-Based Write Workflow (Critical Decision)

### 4.1 핵심 원칙

**확정**
- ❌ LLM이 파일을 즉시 수정하지 않는다
- ✅ 반드시 Write Plan을 먼저 생성한다
- ✅ 사람(PM)의 **명시적 승인 문장**이 있어야만 적용 가능
- ✅ 승인 문장은 향후 CLI/엔진 트리거로 사용 가능

### 4.2 표준 흐름
LLM (분석/결정)
↓
Write Plan 생성
↓
PM 승인
↓
Apply (파일 반영)

### 4.3 의미
- 이 프로젝트는 “자동화 도구”가 아니다
- **사람이 통제하는 AI Project OS**임이 명확해졌다
- 실무/팀 환경에서 사용 가능한 안전장치 확보

---

## 5. CLI / Runtime PoC 결과 (Execution Proof)

### 검증된 사항
- Python CLI로 Chief AI 실제 호출 성공
- config / roles / env 기반 실행 정상
- Windows + VSCode 환경에서 동작 확인

### 발견된 운영 이슈
- `.env` 형식 오류 (`key:value` vs `key=value`)
- UTF-8 BOM / export 스타일 이슈
- CWD / repo_root 경계 문제

### 관리적 결론
- CLI/Runtime 구현은 **기술적으로 충분히 가능**
- 하지만 현재 프로젝트 단계에서는:
  - ❌ 오리지널에 엔진 코드 반영하지 않음
  - ⭕ 설계 가정과 운영 규칙만 유지

---

## 6. PoC를 통해 드러난 운영 인사이트 (중요)

### Confirmed Learnings
- LLM은 상태를 기억하지 않는다
- “방금 말한 것” 같은 지시는 OS에서 위험하다
- write-plan 없이 승인하면 혼선이 발생한다
- 승인 없이 write를 허용하면 OS 설계가 붕괴된다

이 항목들은 **운영 리스크 목록**으로 간주한다.

---

## 7. Explicit Non-Goals (확정)

이 프로젝트의 명시적 비목표는 다음과 같다:

- LLM의 무승인 자동 파일 수정
- 플랫폼 의존 기억
- 대화 기반 암묵적 상태 공유
- 실행 엔진을 설계보다 우선 구현하는 것

---

## 8. Next Direction

### Short-Term
- Write Plan → Approval → Apply 흐름을 전제로 한
  **반자동 apply 엔진 설계(v0.1)**

### Mid-Term
- 이 OS를 다른 실제 문제에 재적용
- CLI UX 개선 (subcommand / approval 명령 분리)

---

## 9. Summary

이번 작업을 통해 **Vibe Package – AI Project OS**는:

- 개념 정의 단계를 넘어
- 실제 실행 가능성이 검증된 OS가 되었으며
- 가장 중요한 차별점인 **Approval-Based AI Workflow**를 확립했다.

이 문서는 향후 모든 작업의 기준점으로 사용한다.
